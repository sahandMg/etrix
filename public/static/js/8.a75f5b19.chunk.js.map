{"version":3,"sources":["components/AdminControlPanel/AdminControlPanel.js"],"names":["AdminControlPanel","state","data","email","password","name","CM","loading","errors","deleteCM","_this","setState","axios","post","URLs","base_URL","admin_control_cm_delete","token","props","then","res","Alert","success","position","effect","beep","timeout","offset","temp","filter","el","console","log","catch","error","sendData","event","preventDefault","validate","Object","keys","length","admin_control_cm_register","window","location","reload","Validator","isEmail","onChange","e","E_Work_EE_Code_etrix_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","E_Work_EE_Code_etrix_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","target","value","_this2","this","admin_control_panel","_this3","_this$state","cms","map","item","key","react__WEBPACK_IMPORTED_MODULE_7___default","a","createElement","hidden","onClick","type","className","react_spinners__WEBPACK_IMPORTED_MODULE_9__","color","style","direction","onSubmit","htmlFor","id","aria-describedby","placeholder","_messages_InlineError__WEBPACK_IMPORTED_MODULE_11__","text","Component","connect","auth","dispatch","onAuth","actions"],"mappings":"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","file":"static/js/8.a75f5b19.chunk.js","sourcesContent":["import React , {Component} from 'react';\r\nimport axios from 'axios';\r\nimport { ClipLoader } from 'react-spinners';\r\nimport Validator from 'validator';\r\nimport InlineError from '../messages/InlineError';\r\nimport * as actions from '../../store/actions/index';\r\nimport { connect } from 'react-redux';\r\nimport Alert from 'react-s-alert';\r\nimport URLs from '../../URLs';\r\n\r\n\r\nclass AdminControlPanel extends Component {\r\n    state = {\r\n        data: {\r\n            email: '',\r\n            password: '',\r\n            name: ''\r\n        },\r\n        CM: [],\r\n        loading: false,\r\n        errors: {}\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios.post(URLs.base_URL+URLs.admin_control_panel,{token: this.props.token})\r\n            .then((res) => {\r\n                console.log('res');\r\n                console.log(res);\r\n                if(res.data !== 410) { this.setState({CM: res.data}) } ;\r\n            })\r\n            .catch((error)=> {\r\n                console.log('error');\r\n                console.log(error);\r\n            });\r\n    }\r\n\r\n    deleteCM = (email) => {\r\n        this.setState({loading: true});\r\n        axios.post(URLs.base_URL+URLs.admin_control_cm_delete,{token: this.props.token, email: email})\r\n            .then((res) => {\r\n                Alert.success('با موفقیعت حذف شد', {\r\n                    position: 'top-right',\r\n                    effect: 'scale',\r\n                    beep: false,\r\n                    timeout: 3000,\r\n                    offset: 100\r\n                });\r\n                let temp = this.state.CM.filter((el)=>{\r\n                    return el.email !== email;\r\n                });\r\n                console.log('res');\r\n                console.log(res);\r\n                this.setState({loading: false});\r\n                this.setState({CM: temp});\r\n            })\r\n            .catch((error)=> {\r\n                this.setState({loading: false});\r\n                console.log('error');\r\n                console.log(error);\r\n            });\r\n    }\r\n\r\n    sendData = (event) => {\r\n        event.preventDefault();\r\n        const errors = this.validate(this.state.data);\r\n        this.setState({ errors });\r\n        if (Object.keys(errors).length === 0) {\r\n            this.setState({loading: true});\r\n            axios.post(URLs.base_URL+URLs.admin_control_cm_register,{token: this.props.token, name: this.state.data.name, email: this.state.data.email , password: this.state.data.password})\r\n                .then((res) => {\r\n                    Alert.success('با موفقیعت ثبت شد', {\r\n                        position: 'top-right',\r\n                        effect: 'scale',\r\n                        beep: false,\r\n                        timeout: 3000,\r\n                        offset: 100\r\n                    });\r\n                    console.log('res');\r\n                    console.log(res);\r\n                    this.setState({loading: false});\r\n                    window.location.reload();\r\n                })\r\n                .catch((error)=> {\r\n                    this.setState({loading: false});\r\n                    console.log('error');\r\n                    console.log(error);\r\n                });\r\n        }\r\n\r\n    }\r\n\r\n    validate = (data) => {\r\n        const errors = {};\r\n        if (!data.name) errors.name = \"Can't be blank\";\r\n        if (!Validator.isEmail(data.email)) errors.email = \"Invalid email\";\r\n        if (!data.password) errors.password = \"Can't be blank\";\r\n        return errors;\r\n    }\r\n\r\n    onChange = e =>\r\n        this.setState({\r\n            data: { ...this.state.data, [e.target.name]: e.target.value }\r\n        });\r\n\r\n    render() {\r\n        const { data, errors, loading } = this.state;\r\n        const cms = this.state.CM.map((item,key)=> {\r\n            return (<tr key={key}><td>{item.name}</td><td>{item.email}</td><td><button hidden={loading} onClick={() => this.deleteCM(item.email)} type=\"button\" className=\"btn btn-primary\">delete</button><ClipLoader color={'#123abc'} loading={loading}/></td></tr>);\r\n        });\r\n        return (\r\n            <div className=\"container text-right\" style={{direction: \"rtl\"}}>\r\n              <br/>\r\n              <h2>اضافه کردن مدیر محتوا</h2>\r\n               <form onSubmit={this.sendData}>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"exampleInputname\">اسم</label>\r\n                    <input name=\"name\" value={data.name} onChange={this.onChange} type=\"text\" className=\"form-control\" id=\"exampleInputname\" aria-describedby=\"emailHelp\"\r\n                           placeholder=\"نام مدیر محتوا را وارد کنید\"/>\r\n                    {errors.name && <InlineError text={errors.name} />}\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"exampleInputEmail1\">ایمیل</label>\r\n                    <input name=\"email\" value={data.email} onChange={this.onChange} type=\"email\" className=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\"\r\n                           placeholder=\"ایمیل مدیر محتوا را وارد کنید\"/>\r\n                    {errors.email && <InlineError text={errors.email} />}\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"exampleInputPassword1\">رمز</label>\r\n                    <input name=\"password\" value={data.password} onChange={this.onChange} type=\"password\" className=\"form-control\" id=\"exampleInputPassword1\" placeholder=\"رمز مدیر محتوا را وارد کنید\"/>\r\n                    {errors.password && <InlineError text={errors.password} />}\r\n                </div>\r\n                <button hidden={loading} type=\"submit\" className=\"btn btn-primary\">ثبت مدیر محتوا</button>\r\n                <ClipLoader color={'#123abc'} loading={loading} />\r\n               </form>\r\n              <br/>\r\n              <hr/>\r\n              <h2>حذف مدیر محتوا</h2>\r\n                <table className=\"table table-striped\">\r\n                    <thead>\r\n                    <tr>\r\n                        <th>Name</th>\r\n                        <th>email</th>\r\n                        <th>delete</th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    {cms}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        token: state.auth.token\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        onAuth: (email,password) => dispatch(actions.auth(email,password))\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(AdminControlPanel);"],"sourceRoot":""}